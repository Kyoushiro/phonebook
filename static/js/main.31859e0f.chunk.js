(this.webpackJsonpphoneform=this.webpackJsonpphoneform||[]).push([[0],[,,,,,,,,,function(t,e,a){},,,function(t,e,a){t.exports=a.p+"static/media/arrowLeft.713fe29d.svg"},function(t,e,a){t.exports=a.p+"static/media/delete.da296998.svg"},function(t,e,a){t.exports=a.p+"static/media/cancel.2c5552a1.svg"},function(t,e,a){t.exports=a.p+"static/media/accept.ce8e2a41.svg"},function(t,e,a){t.exports=a.p+"static/media/user-plus-solid.7465375f.svg"},function(t,e,a){t.exports=a(23)},,,,,function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),o=a(10),s=a.n(o),c=(a(22),a(6)),r=a(11),l=a(7),u=a(2),d=a(3),p=a(1),m=a(5),h=a(4);a(9);var b=function(t){Object(m.a)(a,t);var e=Object(h.a)(a);function a(t){var n;Object(u.a)(this,a),(n=e.call(this,t)).state={name:"",phoneNumber:"",email:"",emailWrong:!1,phoneNumberWrong:!1};return n.statusHandler=n.statusHandler.bind(Object(p.a)(n)),n.numberHandler=n.numberHandler.bind(Object(p.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(p.a)(n)),n.getFormValues=n.getFormValues.bind(Object(p.a)(n)),n.handleUpdateContact=n.handleUpdateContact.bind(Object(p.a)(n)),n.validatePhoneNumber=n.validatePhoneNumber.bind(Object(p.a)(n)),n.validateEmail=n.validateEmail.bind(Object(p.a)(n)),n.validateForm=n.validateForm.bind(Object(p.a)(n)),n}return Object(d.a)(a,[{key:"getFormValues",value:function(){var t=this.props.name,e=this.props.phoneNumber,a=this.props.email;this.setState({name:t,phoneNumber:e,email:a})}},{key:"componentDidMount",value:function(){this.getFormValues()}},{key:"statusHandler",value:function(t){this.setState(Object(c.a)({},t.target.name,t.target.value))}},{key:"numberHandler",value:function(t){""!==t.target.value&&!0!==/^[0-9\b\+]+$/.test(t.target.value)||this.setState(Object(c.a)({},t.target.name,t.target.value))}},{key:"handleSubmit",value:function(t){t.preventDefault();var e=t.target.name.value,a=t.target.phoneNumber.value,n=t.target.email.value;this.props.addContact(e,a,n)}},{key:"handleUpdateContact",value:function(t){t.preventDefault();var e={name:t.target.name.value,phoneNumber:t.target.phoneNumber.value,email:t.target.email.value,id:this.props.id};this.props.updateContact(e)}},{key:"validatePhoneNumber",value:function(t,e,a,n){return function(t,e,a,n){var i=!1;if(0==t.length||void 0===t)i=!0;else{var o=/^((04[0-9]{1})(\s?|-?)|019(\s?|-?)|[+]?358(\s?|-?)19|050(\s?|-?)|0457(\s?|-?)|[+]?358(\s?|-?)50|0358(\s?|-?)50|00358(\s?|-?)50|[+]?358(\s?|-?)4[0-9]{1}|0358(\s?|-?)4[0-9]{1}|00358(\s?|-?)4[0-9]{1})(\s?|-?)(([0-9]{3,4})(\s|\-)?[0-9]{2,3})$/;if(!1===o.test(t)&&(i=!0),!0===e.some((function(e){return e.phoneNumber===t})))if(a){var s=e.findIndex((function(t){return t.id===n})),c=e.findIndex((function(e){return e.phoneNumber===t}));i=!1===o.test(t)||s!==c}else i=!0;else i=!1}return i}(t,e,a,n)}},{key:"validateEmail",value:function(t){return function(t){var e=!1;return(0==t.length||void 0===t||t.split("@")[0].length<=2)&&(e=!0),e}(t)}},{key:"validateForm",value:function(t){t.preventDefault();var e=this.validateEmail(t.target.email.value),a=this.validatePhoneNumber(t.target.phoneNumber.value,this.props.contacts,this.props.isListItem,this.props.id);!1===e&&!1===a?this.props.isListItem?this.handleUpdateContact(t):this.handleSubmit(t):this.setState({emailWrong:e,phoneNumberWrong:a})}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"contactContainer"},i.a.createElement("div",{className:"contactForm"},i.a.createElement("form",{className:"form",onSubmit:this.validateForm},this.props.title,i.a.createElement("label",null,"Name:"),i.a.createElement("br",null),i.a.createElement("input",{name:"name",type:"text",defaultValue:this.props.name,onChange:this.statusHandler}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("label",null,"Phonenumber:"),i.a.createElement("br",null),i.a.createElement("input",{name:"phoneNumber",type:"text",defaultValue:this.props.phoneNumber,onChange:this.numberHandler}),!0===this.state.phoneNumberWrong&&i.a.createElement("p",null,"Either phoneNumber is not in correct format or it already exists in contacts"),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("label",null,"Email:"),i.a.createElement("br",null),i.a.createElement("input",{name:"email",type:"email",defaultValue:this.props.email,onChange:this.statusHandler}),!0===this.state.emailWrong&&i.a.createElement("p",null,"Please write valid email"),i.a.createElement("br",null)," ",i.a.createElement("br",null),this.props.cancel,i.a.createElement("div",{className:"divider"}),i.a.createElement("input",{type:"submit",value:"Save",className:"buttons"})))))}}]),a}(n.Component),v=function(t){Object(m.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).state={newContact:!0,isListItem:!1},n.addContactToDatabase=n.addContactToDatabase.bind(Object(p.a)(n)),n}return Object(d.a)(a,[{key:"addContactToList",value:function(t,e,a){var n={name:t,phoneNumber:e,email:a,editMode:!1,id:this.props.incrementId()},i=this.props.contacts.slice();i.push(n),console.log(n.id),this.props.addToList(i),console.log(e),this.addContactToDatabase(t,e,a,n.id),this.props.backToHome()}},{key:"addContactToDatabase",value:function(t,e,a,n){n===-1/0&&(n=1),fetch("https://phonebook-277012.ey.r.appspot.com/add_user?name=".concat(t,"&phoneNumber=").concat(e,"&email=").concat(a,"&id=").concat(n),{method:"POST",headers:{"Content-type":"application/json",Accept:"application/json"},body:JSON.stringify({name:t,phoneNumber:e,email:a,id:n})}).then((function(t){return t.json()}))}},{key:"cancelAddContact",value:function(){this.props.backToHome()}},{key:"render",value:function(){return i.a.createElement("div",{className:"addContact"},i.a.createElement(i.a.Fragment,null,i.a.createElement(b,{addContact:this.addContactToList.bind(this),contacts:this.props.contacts,newContact:this.state.newContact,cancel:i.a.createElement("input",{className:"button",type:"button",value:"Cancel",onClick:this.cancelAddContact.bind(this)}),title:i.a.createElement("h1",null,"Add Contact"),isListItem:this.state.isListItem})))}}]),a}(n.Component),f=a(12),g=a.n(f),C=function(t){Object(m.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).updateContactInDB=n.updateContactInDB.bind(Object(p.a)(n)),n}return Object(d.a)(a,[{key:"updateContact",value:function(t){this.props.updateList(t,this.props.index),this.updateContactInDB(t.name,t.phoneNumber,t.email,t.id),this.props.toggleUpdate()}},{key:"cancelUpdateContact",value:function(){this.props.toggleUpdate()}},{key:"updateContactInDB",value:function(t,e,a,n){fetch("https://phonebook-277012.ey.r.appspot.com/update_user?name=".concat(t,"&phoneNumber=").concat(e,"&email=").concat(a,"&id=").concat(n),{method:"PUT",headers:{"Content-type":"application/json",Accept:"application/json"},body:JSON.stringify({name:t,phoneNumber:e,email:a,id:n})})}},{key:"render",value:function(){return i.a.createElement(b,{isListItem:this.props.isListItem,name:this.props.name,phoneNumber:this.props.phoneNumber,email:this.props.email,updateContact:this.updateContact.bind(this),contacts:this.props.contacts,index:this.props.index,id:this.props.id,toggleUpdate:this.props.toggleUpdate,cancel:i.a.createElement("input",{type:"image",height:"30",width:"30",src:g.a,alt:"",value:"Cancel",onClick:this.cancelUpdateContact.bind(this)}),title:i.a.createElement("h1",null,"View Contact")})}}]),a}(n.Component),E=a(13),k=a.n(E),y=a(14),O=a.n(y),j=a(15),N=a.n(j),S=function(t){Object(m.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).state={filtered:[],confirmDelete:{}},n.search=n.search.bind(Object(p.a)(n)),n}return Object(d.a)(a,[{key:"search",value:function(t){var e=[];e=""!==t.target.value?this.props.contacts.filter((function(e){var a=e.name.toString().toLowerCase(),n=e.email.toString().toLowerCase(),i=t.target.value.toString().toLowerCase();return a.includes(i)+n.includes(i)})):this.props.contacts,this.setState({filtered:e})}},{key:"handleClick",value:function(t,e,a){"deleteButton"===a.target.name?(this.props.deleteContact(t),this.setState((function(t){return{filtered:t.filtered.filter((function(t){return t!==t}))}}))):"deleteConfirm"===a.target.name?(this.props.activateEdit(t,e,this.state.filtered),this.setState((function(t){return{filtered:t.filtered.filter((function(t){return t!==t}))}}))):"deleteCancel"===a.target.name?this.props.deActivateEdit(t):this.props.listOnClick(t,e)}},{key:"componentDidUpdate",value:function(t){var e=this,a=[];t.contacts!==this.props.contacts&&(a=""!==this.refs.searchInput.value?this.props.contacts.filter((function(t){var a=t.name.toString().toLowerCase(),n=t.email.toString().toLowerCase(),i=e.refs.searchInput.value.toString().toLowerCase();return a.includes(i)+n.includes(i)})):this.props.contacts,this.setState({filtered:a}))}},{key:"render",value:function(){var t=this;return i.a.createElement("div",{className:"contactList"},i.a.createElement("input",{type:"text",className:"inputSearch",placeholder:"Search...",onChange:this.search,ref:"searchInput"}),i.a.createElement("ul",null,this.state.filtered.map((function(e,a){return i.a.createElement("li",{key:e.id,onClick:function(n){return t.handleClick(e,a,n)},style:{cursor:"pointer"}},i.a.createElement("div",{className:"cell"},e.name),e.editMode?[i.a.createElement("input",{type:"image",name:"deleteButton",src:N.a,alt:"",width:"20",height:"20"}),i.a.createElement("input",{type:"image",alt:"",name:"deleteCancel",src:O.a,width:"20",height:"20"})]:i.a.createElement("input",{type:"image",name:"deleteConfirm",src:k.a,alt:"",width:"20",height:"20"}))}))))}}]),a}(n.Component),w=a(16),L=a.n(w),I=function(t){Object(m.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).state={isHomeOpen:!0,isAddContactOpen:!1,isListItem:!1,index:"",filtered:[],id:1,showPopup:!1,showUpdateContact:!1,contacts:[]},n.backToHome=n.backToHome.bind(Object(p.a)(n)),n.updateValue=n.updateValue.bind(Object(p.a)(n)),n.updateList=n.updateList.bind(Object(p.a)(n)),n.deleteContact=n.deleteContact.bind(Object(p.a)(n)),n.listOnClick=n.listOnClick.bind(Object(p.a)(n)),n.activateEdit=n.activateEdit.bind(Object(p.a)(n)),n.deActivateEdit=n.deActivateEdit.bind(Object(p.a)(n)),n.toggleUpdate=n.toggleUpdate.bind(Object(p.a)(n)),n.getContactsFromDB=n.getContactsFromDB.bind(Object(p.a)(n)),n.deleteContactFromDB=n.deleteContactFromDB.bind(Object(p.a)(n)),n}return Object(d.a)(a,[{key:"addToList",value:function(t){this.setState({contacts:t})}},{key:"incrementId",value:function(){return Math.max.apply(Math,Object(l.a)(this.state.contacts.map((function(t){return t.id}))))+1}},{key:"updateList",value:function(t,e){var a=Object(l.a)(this.state.contacts),n=a.findIndex((function(e){return e.id===t.id})),i=Object(r.a)({},a[e]);i.name=t.name,i.phoneNumber=t.phoneNumber,i.email=t.email,i.id=t.id,a[n]=i,this.setState({contacts:a})}},{key:"transferToAddContact",value:function(){this.setState({isAddContactOpen:!0,isHomeOpen:!1})}},{key:"listOnClick",value:function(t,e){this.setState({isListItem:!0,name:t.name,phoneNumber:t.phoneNumber,email:t.email,index:[e],id:t.id}),this.toggleUpdate()}},{key:"backToHome",value:function(){this.setState({showPopup:!this.state.showPopup,isListItem:!1})}},{key:"toggleUpdate",value:function(){this.setState({showUpdateContact:!this.state.showUpdateContact})}},{key:"updateValue",value:function(t){this.setState(Object(c.a)({},t.target.name,t.target.value))}},{key:"deleteContact",value:function(t){this.setState((function(e){return{contacts:e.contacts.filter((function(e){return e.id!==t.id}))}})),this.deleteContactFromDB(t.id)}},{key:"deleteContactFromDB",value:function(t){fetch("https://phonebook-277012.ey.r.appspot.com/delete_user?id=".concat(t),{method:"POST",headers:{"Content-type":"application/json",Accept:"application/json"}})}},{key:"activateEdit",value:function(t,e,a){var n=Object(l.a)(this.state.contacts);n.findIndex((function(e){return e.id===t.id}));t.editMode=!0,this.setState({contacts:n})}},{key:"deActivateEdit",value:function(t){var e=Object(l.a)(this.state.contacts);e[this.state.contacts.findIndex((function(e){return e.phoneNumber===t.phoneNumber}))].editMode=!1,this.setState({contacts:e})}},{key:"togglePopup",value:function(){this.setState({showPopup:!this.state.showPopup})}},{key:"getContactsFromDB",value:function(){var t=this;fetch("https://phonebook-277012.ey.r.appspot.com/get_users").then((function(t){return t.json()})).then((function(e){t.setState({contacts:Object.values(e)})}))}},{key:"componentDidMount",value:function(){this.getContactsFromDB()}},{key:"render",value:function(){var t=this.state.isListItem;return i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"form"},i.a.createElement("div",{className:"header"},i.a.createElement("h1",null,"ContactList"),i.a.createElement("input",{type:"image",height:"50",width:"50",src:L.a,alt:"",onClick:this.togglePopup.bind(this)})),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(S,{contacts:this.state.contacts,listOnClick:this.listOnClick,deleteContact:this.deleteContact,activateEdit:this.activateEdit,deActivateEdit:this.deActivateEdit})))),this.state.showPopup?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(v,{contacts:this.state.contacts,backToHome:this.backToHome,addToList:this.addToList.bind(this),incrementId:this.incrementId.bind(this)}))):null,this.state.showUpdateContact?i.a.createElement(C,{isListItem:t,backToHome:this.backToHome,name:this.state.name,phoneNumber:this.state.phoneNumber,email:this.state.email,id:this.state.id,contacts:this.state.contacts,updateValue:this.updateValue,updateList:this.updateList,index:this.state.index,toggleUpdate:this.toggleUpdate}):null)}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}],[[17,1,2]]]);
//# sourceMappingURL=main.31859e0f.chunk.js.map